# Module 9 – Pick & Place Robot


Integrating pick and place robots with CNC machines creates automated manufacturing cells that reduce labor, increase throughput, and enable lights-out operation.

## Integration Architectures

**Standalone Robot Controller**
- Separate controller for robot
- Communication via digital I/O or network
- CNC and robot coordinate via handshaking signals
- Most flexible, higher complexity

**Integrated CNC Control**
- Robot axes added to CNC controller
- Unified programming (G-code or similar)
- Simpler coordination
- Requires controller support for additional axes

**PLC Coordination**
- PLC orchestrates both CNC and robot
- Ladder logic or structured text programming
- Common in industrial automation
- Good for complex multi-machine cells

## Communication Protocols

**Digital I/O (Handshaking)**

Simple signals exchanged between CNC and robot:

CNC outputs:
- Cycle complete
- Door open
- Ready for load/unload
- Part present in fixture

Robot outputs:
- Part loaded
- Part unloaded
- Robot busy
- Error/fault

Typical sequence:
1. CNC finishes part, signals "cycle complete"
2. Robot waits for "door open" signal
3. Robot signals "robot busy", enters machine
4. Robot unloads part, loads new stock
5. Robot exits, signals "part loaded"
6. CNC closes door, starts cycle

**Serial Communication (RS-232)**
- Text-based commands
- Simple protocol (ASCII strings)
- Limited to 15m distance
- Low cost, easy debugging

Example protocol:
```
CNC → Robot: "READY\r\n"
Robot → CNC: "LOADING\r\n"
Robot → CNC: "COMPLETE\r\n"
CNC → Robot: "START\r\n"
```

**Ethernet Protocols**

Modbus TCP:
- Industrial standard
- Read/write registers and coils
- Many PLCs and controllers support
- 100 Mbps, reliable

EtherCAT:
- Real-time deterministic communication
- Microsecond synchronization
- Requires compatible hardware
- Excellent for coordinated motion

Ethernet/IP:
- Used in Allen-Bradley systems
- CIP (Common Industrial Protocol)
- Good integration with PLCs

**Fieldbus (Legacy)**
- PROFIBUS, DeviceNet, CANopen
- Being replaced by Ethernet solutions
- May be present in older equipment

## Machine Door Control

**Pneumatic Doors**
- Robot triggers solenoid valve
- Opens/closes door automatically
- Interlock prevents robot entry when closed

**Manual Doors with Interlocks**
- Operator opens door manually
- Limit switch signals robot "door open"
- Safety rated interlock (guard switch)

**Electronic Locks**
- Solenoid or electromagnetic lock
- Released only when safe (CNC stopped, robot clear)
- Meets safety standards (ISO 14119)

## Fixture and Part Handling

**Part Holding in CNC**

Vise:
- Manual or pneumatic
- Robot places part, triggers vise close
- Repeatability critical for part location

Chuck (Lathe):
- Pneumatic or hydraulic actuation
- Robot loads bar stock or individual parts
- Air chuck signal controlled by CNC

Fixture Plate:
- Custom fixture for part geometry
- Pneumatic clamps or vacuum
- Multiple parts per fixture (family parts)

**Part Orientation**
- Robot may need to flip part between OP1 and OP2
- Fixture design must accommodate robot gripper
- Clearance for gripper access

## Workpiece Identification

**Barcode/QR Code**
- Vision system reads code on part
- Tracks part serial number
- Selects appropriate CNC program
- Quality traceability

**RFID Tags**
- Embedded tag in fixture or pallet
- Identifies part family or program number
- Automatic program selection

**Vision Inspection**
- Camera verifies part type
- Dimensional check before machining
- Wrong part detection

## Multi-Machine Cells

**Single Robot, Multiple CNCs**
- Robot services 2-4 machines
- Optimizes machine utilization
- Requires cycle time balancing

**Scheduling Algorithms**

Fixed Sequence:
- Robot visits machines in order
- Simple, predictable
- May have idle time

Priority-Based:
- Service machine with longest wait first
- Dynamic scheduling
- Better utilization

**Buffer Stations**
- Queue of raw stock
- Queue of finished parts
- Intermediate storage between operations

## LinuxCNC Integration

**Custom Kinematics Component**
LinuxCNC supports adding custom robot kinematics as HAL component.

Example for SCARA (C code):
```c
// Inverse kinematics function
int kinematicsInverse(const EmcPose *pos, double *joints) {
    double x = pos->tran.x;
    double y = pos->tran.y;
    double z = pos->tran.z;

    // Calculate joint angles
    double c2 = (x*x + y*y - L1*L1 - L2*L2) / (2*L1*L2);
    double theta2 = atan2(-sqrt(1-c2*c2), c2);  // Elbow down
    double theta1 = atan2(y,x) - atan2(L2*sin(theta2), L1+L2*cos(theta2));

    joints[0] = theta1;
    joints[1] = theta2;
    joints[2] = z;

    return 0;
}
```

**HAL Configuration**
```hal
# Load kinematics component
loadrt trivkins coordinates=XYZ
# Or custom: loadrt scara_kins

# Connect motion controller to drives
net j0-pos-cmd joint.0.motor-pos-cmd => servo.0.position-cmd
net j1-pos-cmd joint.1.motor-pos-cmd => servo.1.position-cmd
net j2-pos-cmd joint.2.motor-pos-cmd => servo.2.position-cmd

# Connect I/O for gripper
net gripper-on motion.digital-out-00 => parport.0.pin-01-out
```

**G-Code Programming**
```gcode
G0 X100 Y50 Z50      ; Move to pick position
G1 Z10 F500          ; Lower to part
M64 P0               ; Turn on gripper (digital out 0)
G4 P0.5              ; Wait 0.5 sec
G0 Z50               ; Raise
G0 X200 Y150 Z50     ; Move to place
G1 Z15               ; Lower
M65 P0               ; Turn off gripper
G0 Z50               ; Raise
```

## Safety Integration

**Interlocks**
- Robot cannot enter while CNC spindle running
- CNC cannot start while robot inside
- Emergency stop halts both systems

**Safety-Rated Signals**
- Use safety PLCs or relays
- Redundant monitoring
- Meets Category 3 or 4 per ISO 13849

**Light Curtains**
- Detects operator entry
- Stops robot and CNC
- Type 4 sensors per IEC 61496

## Conveyor Integration

**Part Input**
- Conveyor brings raw stock to robot
- Sensor detects part presence
- Robot picks from moving conveyor (tracking) or stopped

**Part Output**
- Robot places finished parts on conveyor
- Accumulation area for batch pickup
- Automatic boxing/palletizing

**Synchronization**
- Encoder on conveyor belt
- Robot tracks moving part position
- Pick on the fly (advanced)

## Automated Tool Changing

**CNC Tool Changer**
- Standard on many CNC machines
- Robot does not need to handle tools
- CNC controls tool selection

**Robot Tool Changer**
- Robot swaps end effectors
- Handle different part sizes/types
- Quick-change interface

## Cell Controller Software

**Supervisory Control**
- PC or industrial controller
- Coordinates CNC, robot, conveyors
- Production scheduling
- Data logging and reporting

**Communication**
- OPC UA (modern standard)
- MTConnect (machine tool data)
- MQTT (IoT messaging)

**User Interface**
- HMI (Human-Machine Interface)
- Production status display
- Manual override controls
- Error diagnostics

## Example Cell Configurations

**Single CNC + Robot**
- Robot loads raw stock from pallet
- Unloads finished part to conveyor
- Simple handshaking via I/O
- Typical cycle: CNC 3 min, robot 20 sec

**Two CNCs + Robot**
- Robot alternates between machines
- OP1 on CNC1, OP2 on CNC2
- Robot flips part between operations
- Double throughput vs. single machine

**CNC + Inspection + Robot**
- Robot loads CNC
- After machining, robot moves part to CMM
- Inspection results logged
- Accept/reject decision
- Accepted parts to conveyor, rejected to bin

## Cycle Time Optimization

**Overlap Operations**
- Start robot motion while CNC finishing
- Trigger robot early (before "cycle complete")
- Reduce idle time

**Predictive Scheduling**
- Estimate CNC completion time
- Robot arrives just in time
- Minimizes wait time

**Parallel Processing**
- While CNC machines part, robot services other machines
- Vision processing during robot motion
- Gripper activation during approach

## Data Collection and Traceability

**Part Tracking**
- Log serial numbers, timestamps
- Track which machine, which program
- Quality data association

**Machine Utilization**
- Spindle time vs. idle time
- Downtime reasons (waiting for parts, tool changes)
- OEE (Overall Equipment Effectiveness)

**Quality Data**
- In-process inspection results
- SPC (Statistical Process Control) charting
- Alarm/reject logs

***

**Next**: [9.7 Programming and Path Planning](section-9.7-programming.md)

---

## References

1. **Communication Protocols**
   - Modbus Protocol Specification - Modbus.org
   - OPC UA Specification - OPC Foundation
   - MTConnect Standard - MTConnect Institute
   - MQTT Protocol - OASIS Standard

2. **Industrial Networking**
   - EtherNet/IP Specification - ODVA
   - PROFINET IO Specification - PROFIBUS International
   - EtherCAT Technology Group Documentation

3. **CNC Integration**
   - LinuxCNC HAL (Hardware Abstraction Layer) Documentation
   - Mach3/Mach4 Plugin Development Guide
   - FANUC FOCAS Library Documentation

4. **MES/ERP Systems**
   - ISA-95 Enterprise-Control System Integration Standard
   - Groover, M.P. (2014). *Automation and Production Systems*. Pearson
