# Module 21 – Metrology and Precision Measurement


Statistical Process Control (SPC) uses statistical methods to monitor and control manufacturing processes, enabling early detection of problems and continuous improvement.

## 21.7.1 Control Charts and Process Capability

### What is SPC?

SPC is a methodology for:
- Monitoring process variation over time
- Distinguishing normal (common cause) variation from abnormal (special cause) variation
- Detecting process shifts before defects occur
- Providing objective data for process improvement

### Control Charts

Control charts plot measurement data over time and compare it to statistical control limits.

**Basic Components**:

1. **Center Line (CL)**: Process average
2. **Upper Control Limit (UCL)**: CL + 3σ
3. **Lower Control Limit (LCL)**: CL - 3σ
4. **Data Points**: Measurements plotted chronologically

**3-Sigma Limits**: ±3 standard deviations from mean
- Captures 99.73% of normal variation
- Points outside limits indicate "out of control" process

### Types of Control Charts

**Variable Data Charts** (Continuous measurements):

**X-bar and R Chart** (Average and Range):
- Most common SPC chart
- X-bar chart: Plots sample averages
- R chart: Plots sample ranges
- Detects shifts in process mean and variation

**X-bar and S Chart** (Average and Standard Deviation):
- Similar to X-R chart
- S chart plots standard deviation
- Better for sample sizes >10

**Individual and Moving Range (I-MR) Chart**:
- For individual measurements (sample size = 1)
- Used when subgrouping is impractical
- Moving range tracks consecutive differences

**Attribute Data Charts** (Count/Pass-Fail data):

**p Chart**: Proportion defective (variable sample size)

**np Chart**: Number defective (constant sample size)

**c Chart**: Count of defects per unit (constant sample size)

**u Chart**: Defects per unit (variable sample size)

### Control Limits Calculation

**X-bar and R Chart Example**:

Given: 25 subgroups of n=5 measurements

**Step 1**: Calculate average of each subgroup (X-bar)

**Step 2**: Calculate range of each subgroup (R = max - min)

**Step 3**: Calculate grand average and average range:
```
X-double-bar = ΣX-bar / number of subgroups
R-bar = ΣR / number of subgroups
```

**Step 4**: Calculate control limits using constants:

**X-bar Chart**:
```
UCL = X-double-bar + A₂ × R-bar
CL = X-double-bar
LCL = X-double-bar - A₂ × R-bar
```

**R Chart**:
```
UCL = D₄ × R-bar
CL = R-bar
LCL = D₃ × R-bar
```

**Constants** (for n=5):
- A₂ = 0.577
- D₃ = 0
- D₄ = 2.114

### Interpreting Control Charts

**In Control**: Process exhibits only random variation
- All points within control limits
- Random pattern around center line
- No trends or patterns

**Out of Control**: Special cause variation present

**Rules for Detecting Special Causes** (Western Electric Rules):

1. **One point** beyond ±3σ control limits
2. **Two of three consecutive points** beyond ±2σ (on same side)
3. **Four of five consecutive points** beyond ±1σ (on same side)
4. **Eight consecutive points** on one side of center line
5. **Six consecutive points** trending up or down
6. **Fourteen consecutive points** alternating up and down
7. **Fifteen consecutive points** within ±1σ (hugging center)

**Actions When Out of Control**:
- Stop production and investigate
- Identify root cause of special variation
- Implement corrective action
- Resume production and continue monitoring

---

## 21.7.2 Cp, Cpk, and Process Performance Indices

Process capability indices quantify how well a process meets specifications.

### Process Capability Index (Cp)

**Cp** measures the potential capability of a process (if perfectly centered).

**Formula**:
```
Cp = (USL - LSL) / (6σ)
```

Where:
- USL = Upper Specification Limit
- LSL = Lower Specification Limit
- σ = Process standard deviation
- 6σ = Natural process spread (99.73% of distribution)

**Interpretation**:

| Cp Value | Interpretation | Capability |
|----------|----------------|------------|
| Cp < 1.0 | Process spread > spec range | Not capable |
| Cp = 1.0 | Process spread = spec range | Minimally capable |
| Cp = 1.33 | Process spread = 75% of spec | Adequate |
| Cp = 1.67 | Process spread = 60% of spec | Good |
| Cp ≥ 2.0 | Process spread = 50% of spec | Excellent |

**Limitation**: Cp doesn't account for process centering

### Process Capability Index (Cpk)

**Cpk** measures actual capability considering process centering.

**Formula**:
```
Cpk = min[(USL - μ)/(3σ), (μ - LSL)/(3σ)]
```

Where:
- μ = Process mean
- σ = Process standard deviation

**Alternative Formula**:
```
Cpk = Cp × (1 - k)

where k = |μ - Target| / (0.5 × Tolerance)
```

**Interpretation**:

| Cpk Value | Expected Defect Rate | Interpretation |
|-----------|----------------------|----------------|
| Cpk = 0.67 | 4.5% | Poor |
| Cpk = 1.0 | 0.27% (2700 ppm) | Marginal |
| Cpk = 1.33 | 63 ppm | Acceptable (industry standard) |
| Cpk = 1.67 | 0.6 ppm | Good |
| Cpk = 2.0 | 0.002 ppm | Excellent (Six Sigma) |

**Cpk vs. Cp**:
- If Cpk = Cp: Process is perfectly centered
- If Cpk < Cp: Process is off-center
- Goal: Maximize Cpk by centering process

### Process Performance Indices (Pp, Ppk)

**Pp** and **Ppk** are similar to Cp and Cpk but use overall standard deviation (not within-subgroup).

**Difference**:
- **Cp/Cpk**: Use within-subgroup variation (short-term capability)
- **Pp/Ppk**: Use overall variation (long-term performance)

**Comparison**:
- If Pp ≈ Cp: Process is stable over time
- If Pp << Cp: Process drifts or has special causes

### Calculating Standard Deviation for Capability

**Short-Term (Cp, Cpk)**: Use within-subgroup variation
```
σ = R-bar / d₂
```
Where d₂ is constant based on sample size (d₂ = 2.326 for n=5)

**Long-Term (Pp, Ppk)**: Use overall sample standard deviation
```
σ = √[Σ(x - x̄)² / (n-1)]
```

### Example Calculation

**Given**:
- Specification: 25.000 ±0.050 mm (USL=25.050, LSL=24.950)
- Process mean: μ = 25.010 mm
- Process std dev: σ = 0.015 mm

**Calculate Cp**:
```
Cp = (25.050 - 24.950) / (6 × 0.015)
Cp = 0.100 / 0.090 = 1.11
```

**Calculate Cpk**:
```
CPU = (25.050 - 25.010) / (3 × 0.015) = 0.040 / 0.045 = 0.89
CPL = (25.010 - 24.950) / (3 × 0.015) = 0.060 / 0.045 = 1.33
Cpk = min(0.89, 1.33) = 0.89
```

**Interpretation**:
- Cp = 1.11: Process spread nearly fills spec (marginal if centered)
- Cpk = 0.89: Process is off-center toward upper limit (not capable)
- Action: Center process to improve Cpk

---

## 21.7.3 Sampling Plans and Inspection Strategies

### Sampling Plans

**100% Inspection** vs. **Sample Inspection**:

**100% Inspection**:
- Every part measured
- Used for critical features, small lots, high-value parts
- Expensive and time-consuming
- Risk of inspection errors (fatigue)

**Sample Inspection**:
- Subset of parts measured
- Lower cost
- Risk of accepting bad lots or rejecting good lots
- Appropriate for high-volume production

### Acceptance Sampling

**Single Sampling Plan**:
- Take sample of n parts
- Measure/inspect
- Accept lot if defects ≤ acceptance number (c)
- Reject lot if defects > c

**Example**: n=50, c=2
- Inspect 50 parts
- Accept if ≤2 defects found
- Reject if ≥3 defects found

**Double Sampling Plan**:
- Take first sample (n₁)
- Accept if defects ≤ c₁
- Reject if defects ≥ c₂
- Take second sample (n₂) if between c₁ and c₂
- Make final decision based on combined sample

### Sampling Standards

**ANSI/ASQ Z1.4** (formerly MIL-STD-105E):
- Statistical sampling tables
- Based on lot size and acceptable quality level (AQL)
- Provides normal, tightened, and reduced inspection plans

**ANSI/ASQ Z1.9**:
- Similar to Z1.4 but for variable data (measurements)
- Generally smaller sample sizes than attribute plans

### Risk in Sampling

**Producer's Risk (α)**: Probability of rejecting a good lot
- Type I error
- Typically set at 5%

**Consumer's Risk (β)**: Probability of accepting a bad lot
- Type II error
- Typically set at 10%

**Operating Characteristic (OC) Curve**:
- Graphically shows probability of acceptance vs. lot quality
- Used to evaluate sampling plan performance

### Inspection Strategies

**Incoming Inspection**:
- Verify supplier quality
- Critical for purchased components
- Can be reduced with supplier certification

**In-Process Inspection**:
- Catch problems early
- SPC at critical operations
- First article, last article, and periodic sampling

**Final Inspection**:
- Verify finished product
- Typically more comprehensive
- Documentation for shipment

**Skip-Lot Inspection**:
- Inspect only fraction of lots from proven supplier
- Reduces cost while maintaining quality assurance

---

## 21.7.4 Measurement System Analysis (MSA)

Before trusting measurement data for SPC or process capability, the measurement system itself must be validated.

### Components of Measurement Variation

**Total Observed Variation** = Part Variation + Measurement Variation

**Measurement Variation**:
- **Repeatability**: Same operator, same part, same instrument (Equipment Variation - EV)
- **Reproducibility**: Different operators, same part, same instrument (Appraiser Variation - AV)
- **Linearity**: Accuracy across measurement range
- **Bias**: Systematic offset from true value
- **Stability**: Consistency over time

### 21.7.4.1 Gage R&R Studies

Gage Repeatability and Reproducibility (R&R) study quantifies measurement system variation.

**Standard AIAG Method**:

**Setup**:
- 10 parts spanning the process range
- 3 operators
- Each operator measures each part 3 times (in random order)
- Total: 90 measurements (10 × 3 × 3)

**Calculations**:

**Repeatability (EV)**:
```
EV = (R̄/d₂*) × K₁
```
Where R̄ = average range within parts

**Reproducibility (AV)**:
```
AV = √[(X̄diff × K₂)² - (EV²/nr)]
```
Where X̄diff = range of operator averages

**Gage R&R**:
```
GRR = √(EV² + AV²)
```

**%GRR** (Relative to Tolerance):
```
%GRR = (GRR / Tolerance) × 100%
```

**Interpretation**:

| %GRR | Rating | Action |
|------|--------|--------|
| < 10% | Excellent | Acceptable |
| 10-30% | Acceptable | May be acceptable depending on application |
| > 30% | Unacceptable | Improvement required |

**Alternative**: %GRR relative to total variation

**Actions for Poor Gage R&R**:
- High repeatability (EV): Calibrate equipment, improve maintenance, reduce environmental variation
- High reproducibility (AV): Improve operator training, standardize technique, use fixtures
- Both high: Consider different measurement method or instrument

### 21.7.4.2 Bias and Linearity Studies

**Bias Study**:

Tests if measurement system has systematic offset.

**Process**:
1. Measure reference standard multiple times
2. Calculate average measured value
3. Compare to known standard value
4. Bias = Average measured - True value

**Acceptance**: Bias should be < 5% of tolerance

**Linearity Study**:

Tests if bias is consistent across the measurement range.

**Process**:
1. Select 5-10 reference standards spanning range
2. Measure each standard multiple times
3. Calculate bias at each point
4. Plot bias vs. reference value
5. Calculate linearity (slope of bias line)

**Acceptance**: Linearity < 5% of tolerance

**Action if Failed**: Calibrate instrument, check for wear, consider different instrument

---

## Summary

Statistical Process Control provides objective methods for monitoring and improving manufacturing processes. Control charts detect process shifts in real-time. Process capability indices (Cp, Cpk) quantify how well processes meet specifications. Sampling plans balance inspection cost with risk. Measurement System Analysis ensures measurement data is reliable. Together, these tools enable data-driven quality control and continuous improvement.

---

## Key Takeaways

1. **Control charts** distinguish common cause from special cause variation
2. **3-sigma limits** capture 99.73% of normal variation
3. **X-bar and R charts** are most common for variable data
4. **Cp** measures potential capability (centered process)
5. **Cpk** measures actual capability (accounts for centering)
6. **Cpk ≥ 1.33** is typical industry minimum requirement
7. **Gage R&R studies** validate measurement system capability
8. **%GRR < 10%** is excellent; **>30%** requires action
9. **Sampling plans** balance cost and risk
10. **SPC is proactive**: Prevents defects rather than detecting them

---

## Review Questions

1. What is the difference between common cause and special cause variation?
2. Calculate the UCL and LCL for an X-bar chart where X-double-bar = 25.00, R-bar = 0.12, n = 5, A₂ = 0.577.
3. A process has USL=50.0, LSL=40.0, μ=45.5, σ=1.5. Calculate Cp and Cpk.
4. What does it mean if Cp is much larger than Cpk?
5. What is the difference between Cp/Cpk and Pp/Ppk?
6. A Gage R&R study shows %GRR = 35%. What does this mean and what action is required?
7. List three rules that indicate a process is out of statistical control.
8. Why is Cpk = 1.33 commonly used as a minimum requirement?
